<nav role="navigation" aria-label="Primary navigation">
    <MudNavMenu>
        <MudNavLink Href="/" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>

        <AuthorizeView Policy="CanViewTenantPortal">
            <Authorized>
                <MudNavGroup Title="Tenant Portal" Icon="@Icons.Material.Filled.Person" Expanded="true">
                    <MudNavLink Href="/tenant/dashboard" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Dashboard">Dashboard</MudNavLink>
                    <MudNavLink Href="/tenant/lease-summary" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Description">Lease Details</MudNavLink>
                    <MudNavLink Href="/tenant/my-bills" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Receipt">My Bills</MudNavLink>
                    <MudNavLink Href="/tenant/documents" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Folder">My Documents</MudNavLink>
                    <MudNavLink Href="/tenant/move-in" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Assignment">Move-in Handover</MudNavLink>
                </MudNavGroup>
            </Authorized>
        </AuthorizeView>

        <AuthorizeView Policy="CanViewPropertyManagement">
            <Authorized>
                <MudNavGroup Title="Property Management" Icon="@Icons.Material.Filled.Business" Expanded="true">
                    <AuthorizeView Policy="CanViewBuildings" Context="buildingsAuth">
                        <Authorized>
                            <MudNavLink Href="/buildings" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Apartment">Buildings</MudNavLink>
                        </Authorized>
                    </AuthorizeView>
                    <MudNavLink Href="/owners" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.People">Owners</MudNavLink>
                </MudNavGroup>
                <MudNavGroup Title="Tenant Management" Icon="@Icons.Material.Filled.Group" Expanded="true">
                    <AuthorizeView Policy="CanViewTenants" Context="tenantsAuth">
                        <Authorized>
                            <MudNavLink Href="/tenants" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Person">Tenants</MudNavLink>
                        </Authorized>
                    </AuthorizeView>
                    <AuthorizeView Policy="CanViewLeases" Context="leasesAuth">
                        <Authorized>
                            <MudNavLink Href="/leases/create" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Description">Create Lease</MudNavLink>
                        </Authorized>
                    </AuthorizeView>
                </MudNavGroup>
                <MudNavGroup Title="Billing" Icon="@Icons.Material.Filled.Receipt" Expanded="false">
                    <MudNavLink Href="/billing/dashboard" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Dashboard">Dashboard</MudNavLink>
                    <MudNavLink Href="/billing/invoices" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Receipt">Invoices</MudNavLink>
                    <MudNavLink Href="/billing/invoice-runs" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.PlayArrow">Invoice Runs</MudNavLink>
                    <MudNavLink Href="/billing/recurring-charges" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Repeat">Recurring Charges</MudNavLink>
                    <MudNavLink Href="/billing/utility-statements" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Lightbulb">Utility Statements</MudNavLink>
                    <MudNavLink Href="/billing/lease-settings" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Settings">Lease Billing Settings</MudNavLink>
                </MudNavGroup>
                <MudNavLink Href="/products" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ShoppingCart">Products</MudNavLink>
                <MudNavLink Href="/counter" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Add">Counter</MudNavLink>
                <MudNavLink Href="/fetchdata" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.List">Fetch data</MudNavLink>
            </Authorized>
        </AuthorizeView>

        <AuthorizeView>
            <NotAuthorized>
                <MudNavLink Href="/login" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Login">Login</MudNavLink>
                <MudNavLink Href="/register" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.PersonAdd">Register</MudNavLink>
            </NotAuthorized>
        </AuthorizeView>
    </MudNavMenu>
</nav>
